{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///D:/Krishna/Internships/Internship%20Assignments/v0-creator-joy-studio-landing-page/app/smart-video-clips/page.tsx"],"sourcesContent":["const handleUploadAndProcess = async () => {\r\n    if (!uploadedFile) return\r\n  \r\n    try {\r\n      setUploading(true)\r\n      setError(null)\r\n      setUploadProgress(0)\r\n  \r\n      const formData = new FormData()\r\n      formData.append(\"video\", uploadedFile)\r\n  \r\n      console.log(\"Uploading to:\", \"/api/upload-video\")\r\n      console.log(\"File:\", uploadedFile.name, uploadedFile.size)\r\n  \r\n      const uploadInterval = setInterval(() => {\r\n        setUploadProgress((prev) => {\r\n          if (prev >= 95) return prev\r\n          return prev + 5\r\n        })\r\n      }, 300)\r\n  \r\n      const uploadResponse = await fetch(\"/api/upload-video\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      })\r\n  \r\n      clearInterval(uploadInterval)\r\n      \r\n      console.log(\"Upload response status:\", uploadResponse.status)\r\n      \r\n      if (!uploadResponse.ok) {\r\n        const errorData = await uploadResponse.json().catch(() => null)\r\n        console.error(\"Upload error:\", errorData)\r\n        throw new Error(errorData?.error || `Upload failed with status ${uploadResponse.status}`)\r\n      }\r\n  \r\n      const { videoUrl } = await uploadResponse.json()\r\n      console.log(\"Video uploaded:\", videoUrl)\r\n  \r\n      setUploadProgress(100)\r\n      await new Promise(resolve => setTimeout(resolve, 500))\r\n  \r\n      setUploading(false)\r\n      setProcessing(true)\r\n      setUploadProgress(0)\r\n  \r\n      console.log(\"Sending to n8n:\", process.env.NEXT_PUBLIC_N8N_WEBHOOK_URL)\r\n  \r\n      const n8nResponse = await fetch(\r\n        process.env.NEXT_PUBLIC_N8N_WEBHOOK_URL || \"https://your-n8n-instance.com/webhook/video-upload\",\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            videoUrl: videoUrl,\r\n            userId: \"user_123\",\r\n            platforms: [\"LinkedIn\", \"Instagram\", \"YouTube\"],\r\n          }),\r\n        }\r\n      )\r\n  \r\n      console.log(\"n8n response status:\", n8nResponse.status)\r\n  \r\n      if (!n8nResponse.ok) {\r\n        const errorData = await n8nResponse.json().catch(() => null)\r\n        console.error(\"n8n error:\", errorData)\r\n        throw new Error(errorData?.error || \"Failed to process video\")\r\n      }\r\n  \r\n      const result = await n8nResponse.json()\r\n      console.log(\"Processing result:\", result)\r\n  \r\n      setClips(result.clips || [])\r\n      setProcessing(false)\r\n      setUploadedFile(null)\r\n    } catch (err) {\r\n      console.error(\"Full error:\", err)\r\n      setError(err instanceof Error ? err.message : \"An error occurred\")\r\n      setUploading(false)\r\n      setProcessing(false)\r\n      setUploadProgress(0)\r\n    }\r\n  }\r\n  "],"names":[],"mappings":"AAAA,MAAM,yBAAyB;IAC3B,IAAI,CAAC,cAAc;IAEnB,IAAI;QACF,aAAa;QACb,SAAS;QACT,kBAAkB;QAElB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,SAAS;QAEzB,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,SAAS,aAAa,IAAI,EAAE,aAAa,IAAI;QAEzD,MAAM,iBAAiB,YAAY;YACjC,kBAAkB,CAAC;gBACjB,IAAI,QAAQ,IAAI,OAAO;gBACvB,OAAO,OAAO;YAChB;QACF,GAAG;QAEH,MAAM,iBAAiB,MAAM,MAAM,qBAAqB;YACtD,QAAQ;YACR,MAAM;QACR;QAEA,cAAc;QAEd,QAAQ,GAAG,CAAC,2BAA2B,eAAe,MAAM;QAE5D,IAAI,CAAC,eAAe,EAAE,EAAE;YACtB,MAAM,YAAY,MAAM,eAAe,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1D,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM,IAAI,MAAM,WAAW,SAAS,CAAC,0BAA0B,EAAE,eAAe,MAAM,EAAE;QAC1F;QAEA,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,eAAe,IAAI;QAC9C,QAAQ,GAAG,CAAC,mBAAmB;QAE/B,kBAAkB;QAClB,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;QAEjD,aAAa;QACb,cAAc;QACd,kBAAkB;QAElB,QAAQ,GAAG,CAAC;QAEZ,MAAM,cAAc,MAAM,MACxB,oFAA2C,sDAC3C;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU;gBACV,QAAQ;gBACR,WAAW;oBAAC;oBAAY;oBAAa;iBAAU;YACjD;QACF;QAGF,QAAQ,GAAG,CAAC,wBAAwB,YAAY,MAAM;QAEtD,IAAI,CAAC,YAAY,EAAE,EAAE;YACnB,MAAM,YAAY,MAAM,YAAY,IAAI,GAAG,KAAK,CAAC,IAAM;YACvD,QAAQ,KAAK,CAAC,cAAc;YAC5B,MAAM,IAAI,MAAM,WAAW,SAAS;QACtC;QAEA,MAAM,SAAS,MAAM,YAAY,IAAI;QACrC,QAAQ,GAAG,CAAC,sBAAsB;QAElC,SAAS,OAAO,KAAK,IAAI,EAAE;QAC3B,cAAc;QACd,gBAAgB;IAClB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,eAAe;QAC7B,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAC9C,aAAa;QACb,cAAc;QACd,kBAAkB;IACpB;AACF"}}]
}